/**
 * í—¤ë” íŒŒì¼ì„ í¬í•¨í•˜ë©´, í•¨ìˆ˜ë¿ë§Œ ì•„ë‹ˆë¼ ê´€ë ¨ í´ë˜ìŠ¤, ë„¤ì„ìŠ¤í˜ì´ìŠ¤, íƒ€ì… ë“±ì— ëŒ€í•œ ì •í™•í•œ ì •ë³´ë¥¼ ì œê³µë°›ì•„ ì»´íŒŒì¼ëŸ¬ê°€ ì˜¬ë°”ë¥´ê²Œ íƒ€ì… ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
 */
#include "iot.h"
#include "iot_gmock.h"

/**
 * ğŸ’¯
 * ì „ì—­ í¬ì¸í„° gHealthCheckerMockê°€ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´ ê·¸ ê°ì²´ë¥¼ í†µí•´ gmockì˜ ë™ì‘(ì˜ˆ: EXPECT_CALL)ì„ ìˆ˜í–‰í•˜ë„ë¡ í•©ë‹ˆë‹¤.
 * -> ì „ì—­ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•´ í•¨ìˆ˜ì˜ ë°˜í™˜ ê°’ì„ ì¡°ì‘í–ˆë˜ ê²ƒê³¼ ë¹„ìŠ·í•˜ê²Œ ì—¬ê¸°ì„œëŠ” ì „ì—­ gmock ê°ì²´ë¥¼ ì‚¬ìš©í•œë‹¤.!
 * 
 * GMockê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì™œ ì‚¬ìš©í• ê¹Œâ“
 * ì§ì ‘ Mock classë¥¼ ë§Œë“¤ìˆ˜ë„ ìˆì§€ë§Œ GMockì—ëŠ” ì¢€ ë” ìƒì„¸í•œ ì¡°ì‘ì„ ìœ„í•œ
 * (ì¸ì ê°’, í˜¸ì¶œ ì—¬ë¶€, ë“± ê²€ì¦) ë©”ì„œë“œë“¤ì´ êµ¬í˜„ë˜ì–´ìˆë‹¤.
 * -> 
 */
HealthCheckerMock* gHealthCheckerMock = nullptr;

namespace iot {
  namespace chain {
    // productionì—ì„œëŠ” í•­ìƒ trueë¥¼ ë°˜í™˜í•˜ì§€ë§Œ, í…ŒìŠ¤íŠ¸ì—ì„œëŠ” gmock ê°ì²´ë¥¼ í†µí•´ ì œì–´í•©ë‹ˆë‹¤.
    bool checkHealth(int fullness) {
      if (gHealthCheckerMock) {
        return gHealthCheckerMock->checkHealth(fullness);
      }
      return true; // ê¸°ë³¸ê°’ (ëª¨ì˜ ê°ì²´ê°€ ì—†ìœ¼ë©´ productionê³¼ ë™ì¼í•˜ê²Œ true)
    }
  }
}
